<!DOCTYPE html>
<html>
	<head>
		<link href="publication-web-resources/css/main.css" rel="stylesheet" type="text/css">
		<script src="publication-web-resources/script/main.js" type="text/javascript"></script>
        
        <style>
            /* 1. Light Grey Background */
            body, html {
                margin: 0;
                padding: 0;
                width: 100%;
                height: 100%;
                background-color: #f0f0f0; /* Very Light Grey */
                overflow: hidden; 
            }

            /* 2. Make the iframe fill the screen */
            #contentIFrame {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border: none;
            }
        </style>

        <script>
            function forceCenterLayout() {
                var iframe = document.getElementById("contentIFrame");
                // Get the document inside the iframe
                var innerDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // Create a style element to override InDesign defaults
                var style = innerDoc.createElement('style');
                style.innerHTML = `
                    /* Set background of the publication to transparent so our light grey shows */
                    body {
                        background-color: transparent !important;
                        display: flex !important;
                        justify-content: center !important;
                        width: 100vw !important;
                        overflow-x: hidden !important;
                    }

                    /* 
                       STRONG CENTERING:
                       This targets specific divs InDesign creates (usually id="container").
                       We force it to move 50% to the right, then shift it back 50% of its own width.
                    */
                    div[id^="container"], #main, .page, div[style*="position: absolute"] {
                        position: relative !important;
                        left: auto !important;
                        margin-left: auto !important;
                        margin-right: auto !important;
                        
                        /* If the element is still stuck, this next line is the "Nuclear Option" */
                        /* transform: translateX(0) !important; */
                    }
                `;
                innerDoc.head.appendChild(style);
            }
        </script>
	</head>
    
    <!-- We run the centering script when the iframe finishes loading -->
	<body onload="showHideArrows()">
		<iframe onload="showHideArrows(); setTimeout(forceCenterLayout, 100);" id="contentIFrame" class="contentIframeClass" src="publication-web-resources/html/publication.html"></iframe>
		
        <iframe id="dummyIFrame" class="dummyFrameClass"></iframe>
		<div class="prev" onclick="showPreviousPage()">&#10094;</div>
		<div class="next" onclick="showNextPage()">&#10095;</div>
	</body>
</html>
